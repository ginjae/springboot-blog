<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="en">
<head>
    <meta charset="UTF-8">
    <title>블로그 글</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
</head>
<body>
<div class="p-5 mb-5 text-center bg-light">
    <h1 class="mb-3"><a href="/articles">Jaemin Kim</a></h1>
    <h4 class="mb-3">블로그에 오신 것을 환영합니다.</h4>
</div>

<div class="container mb-5">
    <div class="text-center">
        <div class="alert alert-danger d-inline-block" th:if="${error} != null" th:text="${error}"></div>
    </div>
    <article th:if="${error} == null">
        <input type="hidden" id="article-id" th:value="${article.id}">
        <input type="hidden" id="csrf" th:value="${_csrf?.token}">

        <header class="mb-4">
            <h1 class="fw-bolder mb-1" th:text="${article.title}"></h1>
            <div th:text="${article.author}"></div>
            <div class="text-muted"
                 th:text="|Posted on ${#temporals.format(article.createdAt, 'yyyy-MM-dd')}
                 at ${#temporals.format(article.createdAt, 'HH:mm:ss')}|"></div>
            <div class="text-muted mb-2" th:if="${article.createdAt} != ${article.updatedAt}"
                 th:text="|Updated on ${#temporals.format(article.updatedAt, 'yyyy-MM-dd')}
                 at ${#temporals.format(article.updatedAt, 'HH:mm:ss')}|"></div>
        </header>
        <section class="mb-5">
            <p class="fs-5 mb-4" style="white-space:pre-wrap;word-break:break-all;" th:text="${article.content}"></p>
        </section>
        <button type="button" sec:authorize="isAuthenticated()" th:onclick="|location.href='@{/write-article?id={articleId}(articleId=${article.id})}'|" class="btn btn-primary btn-sm">수정</button>
        <button type="button" sec:authorize="isAuthenticated()" id="delete-btn" class="btn btn-secondary btn-sm">삭제</button>
    </article>
</div>

<script src="/js/article.js"></script>
</body>
</html>
